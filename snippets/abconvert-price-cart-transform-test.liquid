<script id="ABConvert-price-test-v2">
var abconvertCssSettings = {"useTitleIdentifyProductCard":false,"_id":"68108cc6bdd275b22fa7d881","storeName":"steelmonks.myshopify.com","productCardClass":"product-card__container","productInfoTagInProductPageClass":"section.product__container","priceTagInProductPageClass":"span.price-item--regular,span.price-item--sale","compareAtPriceTagInProductPageClass":"s.price-item--regular","saleBadgeTagClass":"span.price__badge-sale","saleBadgeTagInProductCard":"span.badge","hasBundleBearVolumeDiscount":false,"hasConversionBearStickyAddToCart":false,"hasSavePrice":false,"priceSaveTag":"div#FW_PriceSave_tag","customScript":"","savePercentTagInProductCard":"a.custom__product-overlay--discounted","saveAmountTagInProductCard":"","savePercentTagInProductPage":"","saveAmountTagInProductPage":"span.price-badge","hasKachingBundle":false,"kachingBundleArea":"kaching-bundles-block","kachingBundlePrice":"div.kaching-bundles__bar-price","hasFrequentlyBoughtTogether":false,"isNotShowingDecimal":false,"isAttributeQuerySelector":false,"__v":0};

var abconvertLiquidVariables = {
    abconvertProduct : {{ product | json }},
    shopMoneyFormat: {{ shop.money_format | json }},
    shopMoneyWithCurrencyFormat : {{ shop.money_with_currency_format | json }},
    currencySymbol: {{ cart.currency.symbol | json }},
    currencyCode: {{ cart.currency.iso_code | json }},
    shopifyProductId: {{ product.id | json }},
    shopifyProductHandle: {{ product.handle | json }},
    pageType: {{ request.page_type | json }}, // product, index, search, collections
    shopifySelectedOrFirstAvailableVariantId: {{ product.selected_or_first_available_variant.id | json }},
};
Object.keys(abconvertCssSettings).forEach(function(key) { 
    if(key!='storeName' && key!='__v' && key!='_id'){ 
        window[key] = abconvertCssSettings[key]; 
    } 
});

Object.keys(abconvertLiquidVariables).forEach(function(key) {
    window[key] = abconvertLiquidVariables[key];
});


var abconvertPriceCartTransformTestDict = {{ shop.metafields.abconvert.abconvertPriceCartTransformTestDict }};
 window.abconvertPriceCartTransformTestDict = abconvertPriceCartTransformTestDict;
(()=>{"use strict";const e=(e,r,o)=>{let{operator:n,value:a,action:c,groupIndex:i=0}=r;switch(n){case"contain":return e.includes(a)?t({action:c,groupIndex:i}):-1;case"not contain":return e.includes(a)?-1:t({action:c,groupIndex:i});case"equal":return e===a?t({action:c,groupIndex:i}):-1;case"not equal":return e!==a?t({action:c,groupIndex:i}):-1;default:return-1}},t=e=>{let{action:t,groupIndex:r=0}=e;switch(t){case"assign-test-group":return r;case"assign-random":return"random";default:return 0}},r=[/Googlebot/,/Googlebot-Image/,/Googlebot-Video/,/Googlebot-News/,/Storebot-Google/,/Google-InspectionTool/,/GoogleOther/,/Google-Extended/,/APIs-Google/,/AdsBot-Google-Mobile/,/AdsBot-Google/,/Mediapartners-Google/,/Google-Safety/,/FeedFetcher-Google/,/GoogleProducer/,/Bingbot/,/Slurp/,/DuckDuckBot/,/Baiduspider/,/YandexBot/,/facebot/,/Twitterbot/],o={};for(let e in o)window[e]=o[e];const n=window.productInfoTagInProductPageClass??"product-info",a=window.priceTagInProductPageClass??"span.price-item",c=window.compareAtPriceTagInProductPageClass??"s.price-item",i=window.saleBadgeTagClass??"span.price__badge-sale",l=window.saleBadgeTagInProductCard??"span.badge",s=window.hasSavePrice??!1,u=window.priceSaveTag??"div#FW_PriceSave_tag",d=(window.hasBundleBearVolumeDiscount,window.bundleBearVolumeDiscountArea,window.bundleBearVolumeDiscountPrice,window.bundleBearVolumeDiscountCompareAtPrice,window.bundleBearVolumeDiscountSaveText,window.hasConversionBearStickyAddToCart??!1),p=window.stickyIframe??"iframe#cb-widget-frame",m=window.stickyPrice??"div.stickyProductPriceOriginal",y=window.stickyCompareAtPrice??"div.stickyProductPriceCompare",f=window.savePercentTagInProductCard??"",v=window.saveAmountTagInProductCard??"",g=window.savePercentTagInProductPage??"",w=window.saveAmountTagInProductPage??"",b=window.hasKachingBundle??!1,T=window.kachingBundleArea??"kaching-bundles-block",P=window.kachingBundlePrice??"div.kaching-bundles__bar-price",S=window.kachingBundleCompareAtPrice??"div.kaching-bundles__bar-full-price",h=window.hasFrequentlyBoughtTogether??!1,C=window.stickyAddToCartTag??"",x=window.productCardQuantitySelector??"",A=window.abconvertPriceCartTransformTestDict??{};(async()=>{const o={KRW:1e3,INR:100,IDR:1e3,VND:1e3,PHP:100,JPY:100};function q(e){for(var t=e+"=",r=document.cookie.split(";"),o=0;o<r.length;o++){for(var n=r[o];" "==n.charAt(0);)n=n.substring(1,n.length);if(0==n.indexOf(t))return n.substring(t.length,n.length)}return null}function I(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=parseFloat(e),o=r.toString();return o=window.isNotShowingDecimal?Math.round(parseFloat(r)).toString():r.toFixed(2),t?o.replace(".",",").replace(/\B(?=(\d{3})+(?!\d))/g,"."):o.replace(/\B(?=(\d{3})+(?!\d))/g,",")}function F(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e;if(window.Shopify&&window.Shopify.currency&&window.Shopify.currency.rate&&1!=window.Shopify.currency.rate)if(o[window.Shopify.currency.active]){const t=o[window.Shopify.currency.active];r=Math.ceil(e*window.Shopify.currency.rate/t)*t}else r=Math.ceil(e*window.Shopify.currency.rate);return window.isNotShowingDecimal?t?r.toString().replace(".",",").replace(/\B(?=(\d{3})+(?!\d))/g,"."):Math.round(parseFloat(r)).toString():t?parseFloat(r).toFixed(2).replace(".",",").replace(/\B(?=(\d{3})+(?!\d))/g,"."):parseFloat(r).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")}function G(r){const{testPercentages:o,isFilteredByCountry:n,filteredCountriesMap:a,isFilteredByAudience:c,audienceFilterList:i,audienceFilterNotMatchAction:l,timeSinceLastArrivalFilter:s,isFilteredByCookie:u,cookieFilterList:d,cookieFilterNotMatchAction:p,newVsReturningVisitorFilter:m,startTime:y}=r;if(n){const e=R();if(a&&!a[e])return 0}const f=function(){const e=new URLSearchParams(location.search),t=e.get("preview"),r=e.get("countryCode");return r&&window.sessionStorage.setItem("abconvert-country",r),t&&!isNaN(Number(t))?(window.sessionStorage.setItem("abconvert-preview-number",t),e.get("preview")):window.sessionStorage.getItem("abconvert-preview-number")}();if(f){if(f>=r.testPercentages.length)return 0;{let e=!1;if(r.isFilteredByCountry&&r.filteredCountriesMap){const t=window.sessionStorage.getItem("abconvert-country");t&&!r.filteredCountriesMap[t]&&(e=!0)}return e?0:f}}if(c&&i.length&&l){let r;r=-1;for(let t=0;t<i.length;t++){const o=i[t],n=o.trafficSource,a=localStorage.getItem(n);if(a&&(r=e(a,o)),-1!=r)break}if(-1==r&&(r=t(l)),"random"!=r)return r}if(u&&d.length&&p){let r;r=-1;for(let t=0;t<d.length;t++){const o=d[t],n=q(o.key);if(n&&(r=e(n,o)),-1!=r)break}if(-1==r&&(r=t(p)),"random"!=r)return r}if(s){const{matchType:e,groupIndex:t,value:r,benchmark:o,otherwise:n}=s,a=(new Date).valueOf(),c=localStorage.getItem("abconvert-first-visit-time")?Number(localStorage.getItem("abconvert-first-visit-time")):a;localStorage.getItem("abconvert-first-visit-time")||localStorage.setItem("abconvert-first-visit-time",a.toString());const i=o-c;if("<"==e&&i<r)return t;if(">"==e&&i>r)return t;if("random"!=n)return n}if(m){let e;const t=(new Date).valueOf(),r=localStorage.getItem("abconvert-first-visit-time")?Number(localStorage.getItem("abconvert-first-visit-time")):t;if(localStorage.getItem("abconvert-first-visit-time")||localStorage.setItem("abconvert-first-visit-time",t.toString()),e=r>new Date(y).valueOf()?m.new:m.returning,"random"!=e)return Number(e)}const v=function(){let e=localStorage.getItem("abconvert-seed");return null==e&&(e=Math.floor(100*Math.random()).toString(),localStorage.setItem("abconvert-seed",e)),e}();let g,w=0;for(g=0;g<o.length;++g)if(w+=o[g],Number(v)<w)return g;return g}function E(e,t){let r="";return e?.target?.defaultValue&&N(e.target.defaultValue)&&t.includes(e.target.defaultValue)&&(r=e.target.defaultValue),e?.target?.value&&N(e.target.value)&&t.includes(e.target.value)&&(r=e.target.value),r}function M(e,t){const r=e.lowestPrice[0],o=e.lowestCompareAtPrice[0],n=e.lowestPrice[t],a=e.lowestCompareAtPrice[t]?e.lowestCompareAtPrice[t]:"",c=e.lowestPrice[t],i=e.lowestCompareAtPrice[t],l=e.slug,s=e.title,u=1==e.variantIds[t].length;return{originalLowestPrice:r,originalLowestCompareAtPrice:o,lowestPrice:n,lowestCompareAtPrice:a,priceToReplace:c,compareAtPriceToReplace:i,originalFirstVariantPrice:e.firstVariantPrice[0],originalFirstVariantCompareAtPrice:e.firstVariantCompareAtPrice[0],firstVariantPrice:e.firstVariantPrice[t],firstVariantCompareAtPrice:e.firstVariantCompareAtPrice[t],slug:l,onlyVariant:u,isSamePrice:!!e.isSamePrice,title:s}}function L(e,t,r,o){let{originalLowestPrice:n,originalLowestCompareAtPrice:a,lowestPrice:c,lowestCompareAtPrice:i,priceToReplace:s,compareAtPriceToReplace:u,originalFirstVariantPrice:d,originalFirstVariantCompareAtPrice:p,firstVariantPrice:m,firstVariantCompareAtPrice:y,slug:g,onlyVariant:w,isSamePrice:b,title:T}=o;if(function(e,t){return!!window.useTitleIdentifyProductCard&&!!e.textContent.includes(t)}(e,T)||function(e,t){const r=e.querySelectorAll("a");if(r.length)return Array.from(r).filter((e=>{if(!e.href)return!1;const r=new URL(e.href).pathname.split("/");return r[r.length-1]==encodeURI(`${t}`)})).length>0;{if("A"==e.nodeName){if(!e.href)return!1;const r=new URL(e.href).pathname.split("/");return r[r.length-1]==encodeURI(`${t}`)}const r=e.getAttribute("data-url");if(r){const e=r.split("/");return e[e.length-1]==encodeURI(`${t}`)}{const r=e.querySelectorAll("[data-url]");if(r.length)return Array.from(r).filter((e=>{const r=e.getAttribute("data-url").split("/");return r[r.length-1]==encodeURI(`${t}`)})).length>0}return!1}}(e,g)||function(e,t){const r=["data-product-id","id"].map((e=>"["+e+'="'+t+'"]')).join(",");return 0!=e.querySelectorAll(r).length||e.getAttribute("data-product-id")==t||e.querySelector('input[name="product-id"]')?.value==t}(e,r)){let o=1;x&&e.querySelector(x)&&(o=e.querySelector(x)?.value??1);let s=!1;const u={},g={};let w=R()??"";for(let e of Object.keys(A[r].variantToGroupIndexToPrice)){let n=A[r].variantToGroupIndexToPrice[e][0]?.countryMap?.[w]?.price,a=A[r].variantToGroupIndexToPrice[e][0]?.countryMap?.[w]?.compareAtPrice,c=A[r].variantToGroupIndexToPrice[e][t]?.countryMap?.[w]?.price,i=A[r].variantToGroupIndexToPrice[e][t]?.countryMap?.[w]?.compareAtPrice,l=A[r].variantToGroupIndexToPrice[e][0]?.price,d=A[r].variantToGroupIndexToPrice[e][0]?.compareAtPrice,p=A[r].variantToGroupIndexToPrice[e][t]?.price,m=A[r].variantToGroupIndexToPrice[e][t]?.compareAtPrice;c&&n?(s=!0,u[I(n*o)]=I(c*o),u[I(n*o,!0)]=I(c*o,!0),a&&(g[I(a*o)]=I(i*o),g[I(a*o,!0)]=I(i*o,!0))):(u[I(l*o)]=I(p*o),u[I(l*o,!0)]=I(p*o,!0),d&&(g[I(d*o)]=m?I(m*o):"",g[I(d*o,!0)]=m?I(m*o,!0):""))}let b={},T={};s?(b=u,T=g):(b[F(d*o)]=F(m*o),b[F(d*o,!0)]=F(m*o,!0),b[F(n*o)]=F(c*o),b[F(n*o,!0)]=F(c*o,!0),T[F(p*o)]=y?F(y*o):"",T[F(p*o,!0)]=y?F(y*o,!0):"",T[F(a*o)]=N(i)?F(i*o):"",T[F(a*o,!0)]=N(i)?F(i*o,!0):"");const P=Object.keys(b),S=K(e,P);for(let e of S)P.forEach((t=>{b[t]&&e.textContent?.trim().includes(t)&&!e.textContent?.trim().includes(b[t])&&e?.parentElement&&(e.parentNode.setAttribute("data-processed-abconvert-v2-product-card-price","true"),e.parentNode.setAttribute("data-processed-abconvert-v2-variant","first"),e.parentElement.innerHTML=e.parentElement.innerHTML.replace(t,b[t]))}));const h=Object.keys(T),C=K(e,h);for(let t of C)t.parentElement?.hasAttribute("data-processed-abconvert-v2-product-card-price")||h.forEach((r=>{t.textContent?.trim().includes(r)&&!t.textContent?.trim().includes(T[r])&&t?.parentElement&&(t.parentElement.setAttribute("data-processed-abconvert-v2-product-card-compare-at-price","true"),t.parentElement.setAttribute("data-processed-abconvert-v2-variant","first"),T[r]?t.parentElement.innerHTML=t.parentElement.innerHTML.replace(r,T[r]):r&&parseFloat(r)&&(t?.parentElement&&(t.parentElement.style.display="none"),e.querySelector(l)&&(e.querySelector(l).style.display="none")))}));if(f&&0!=t){Math.ceil((parseFloat(a)-parseFloat(n))/parseFloat(a));const t=Math.ceil((parseFloat(i)-parseFloat(c))/parseFloat(i)*100);let r=e.querySelectorAll(f);r.length>0&&r.forEach((e=>{if(i&&c){let r=e.textContent.match(/\d+(\.\d+)?/g)?.[0];e.textContent=e.textContent.replace(r,t)}else e.style.display="none"}))}if(v&&0!=t){const t=parseFloat(a)-parseFloat(n),r=parseFloat(i)-parseFloat(c);let o=e.querySelectorAll(v);o.length>0&&o.forEach((e=>{i&&c?(e.textContent.includes(F(t))&&(e.textContent=e.textContent.replace(F(t),F(r))),e.textContent.includes(F(t,!0))&&(e.textContent=e.textContent.replace(F(t,!0),F(r,!0)))):e.style.display="none"}))}e.setAttribute("data-processed-abconvert-v2-product-card","true");let q="",G=window.abconvertPriceCartTransformTestDict[r].variantIds[t];e.addEventListener("change",(function(e){E(e,G)&&(q=E(e,G))})),new MutationObserver((function(t){q&&B(q,e)})).observe(e,{childList:!0,subtree:!0,attributes:!0})}}let V=0;function k(){const e=function(){let e;return e=window.productCardClass?window.isAttributeQuerySelector?window.productCardClass:window.productCardClass.split(",").map((e=>"a"==e?e:"."+e)).join(","):["card-wrapper","product-item","grid-product__wrapper","collection-list__item","grid__item","grid-product","product-grid-item","product-card","grid-item","product-block","product__grid","ProductItem","product"].map((e=>"."+e)).join(","),document.querySelectorAll(e)}();if(e.length!=V){V=e.length;for(let[t,r]of Object.entries(A))if(N(t)){const t=G(r),{originalLowestPrice:o,originalLowestCompareAtPrice:n,lowestPrice:a,lowestCompareAtPrice:c,priceToReplace:i,compareAtPriceToReplace:l,originalFirstVariantPrice:s,originalFirstVariantCompareAtPrice:u,firstVariantPrice:d,firstVariantCompareAtPrice:p,slug:m,onlyVariant:y,isSamePrice:f,title:v}=M(r,t);for(let g of e)L(g,t,r.productId,{originalLowestPrice:o,originalLowestCompareAtPrice:n,lowestPrice:a,lowestCompareAtPrice:c,priceToReplace:i,compareAtPriceToReplace:l,originalFirstVariantPrice:s,originalFirstVariantCompareAtPrice:u,firstVariantPrice:d,firstVariantCompareAtPrice:p,slug:m,onlyVariant:y,isSamePrice:f,title:v})}}}function O(){return new URLSearchParams(window.location.search).get("variant")}function $(e){if(window.abconvertPriceCartTransformTestDict[window.shopifyProductId]){document.querySelector(n)?.setAttribute("data-processed-abconvert-v2-product-info","true");const t=window.abconvertPriceCartTransformTestDict[window.shopifyProductId],r=G(t);let o=t.variantToGroupIndexToPrice[e][0].price,l=t.variantToGroupIndexToPrice[e][r].price,s=R(),u=!1;s&&t.variantToGroupIndexToPrice[e][0]?.countryMap?.[s]?.price&&t.variantToGroupIndexToPrice[e][r]?.countryMap?.[s]?.price&&(o=t.variantToGroupIndexToPrice[e][0]?.countryMap?.[s]?.price,l=t.variantToGroupIndexToPrice[e][r]?.countryMap?.[s]?.price,u=!0);const d=document.querySelector(n)?.querySelectorAll(a);let p=t.variantToGroupIndexToPrice[e][0].compareAtPrice,m=t.variantToGroupIndexToPrice[e][r].compareAtPrice;s&&t.variantToGroupIndexToPrice[e][0]?.countryMap?.[s]?.compareAtPrice&&t.variantToGroupIndexToPrice[e][r]?.countryMap?.[s]?.compareAtPrice&&(p=t.variantToGroupIndexToPrice[e][0]?.countryMap?.[s]?.compareAtPrice,m=t.variantToGroupIndexToPrice[e][r]?.countryMap?.[s]?.compareAtPrice,u=!0);const y=document.querySelector(n)?.querySelectorAll(c);let f=u?I:F;for(let t of d)null==t.textContent.match(f(o))&&null==t.textContent.match(f(o,!0))||null!=t.textContent.match(f(l))||null!=t.textContent.match(f(l,!0))||(t.setAttribute("data-processed-abconvert-v2-product-info-price","true"),t.setAttribute("data-processed-abconvert-v2-variant",e),t.innerHTML=t.innerHTML.replace(f(o),f(l)),t.innerHTML=t.innerHTML.replace(f(o,!0),f(l,!0)));if(p&&!m)document?.querySelector(n)?.querySelector(i)&&(document.querySelector(n).querySelector(i).style.display="none"),y.forEach((e=>{e.style.display="none"}));else for(let t of y)null==t.textContent.match(f(p))&&null==t.textContent.match(f(p,!0))||null!=t.textContent.match(f(m))||null!=t.textContent.match(f(m,!0))||(t.setAttribute("data-processed-abconvert-v2-product-info-compare-at-price","true"),t.setAttribute("data-processed-abconvert-v2-variant",e),m?(t.innerHTML=t.innerHTML.replace(f(p),f(m)),t.innerHTML=t.innerHTML.replace(f(p,!0),f(m,!0))):t.style.display="none");if(g&&0!=r){Math.ceil((parseFloat(p)-parseFloat(o))/parseFloat(p));const e=Math.ceil((parseFloat(m)-parseFloat(l))/parseFloat(m)*100);let t=document.querySelectorAll(g);t.length>0&&t.forEach((t=>{if(m&&l){let r=t.textContent.match(/\d+(\.\d+)?/g)?.[0];t.textContent=t.textContent.replace(r,e)}else t.style.display="none"}))}if(w&&0!=r){const e=parseFloat(p)-parseFloat(o),t=parseFloat(m)-parseFloat(l);let r=document.querySelectorAll(w);r.length>0&&r.forEach((r=>{r.textContent&&(m&&l?(r.textContent.includes(f(e))&&(r.textContent=r.textContent.replace(f(e),f(t))),r.textContent.includes(F(e,!0))&&(r.textContent=r.textContent.replace(f(e,!0),f(t,!0)))):r.style.display="none")}))}}EventTarget.prototype.dispatchEvent.call(document,new Event("removeHideStyleElement"))}function B(e,t){let r=1;x&&t.querySelector(x)&&(r=t.querySelector(x)?.value??1);const o=R();for(let[n,a]of Object.entries(A))if(N(n)){const n=G(a);let c={},i={};if(a.variantIds[n].includes(e)){o&&a.variantToGroupIndexToPrice[e][0]?.countryMap?.[o]?.price&&a.variantToGroupIndexToPrice[e][n]?.countryMap?.[o]?.price?c[I(a.variantToGroupIndexToPrice[e][0].countryMap?.[o]?.price*r)]=I(a.variantToGroupIndexToPrice[e][n].countryMap?.[o]?.price*r):N(a.variantToGroupIndexToPrice[e][0].price)&&(c[F(a.variantToGroupIndexToPrice[e][0].price*r)]=F(a.variantToGroupIndexToPrice[e][n].price*r),c[F(a.variantToGroupIndexToPrice[e][0].price*r,!0)]=F(a.variantToGroupIndexToPrice[e][n].price*r,!0));const s=Object.keys(c),u=K(t,s);for(let t of u)s.forEach((r=>{t.textContent?.trim().includes(r)&&!t.textContent?.trim().includes(c[r])&&t?.parentElement&&(t.parentElement.setAttribute("data-processed-abconvert-v2-variant",e),t.parentElement.setAttribute("data-processed-abconvert-v2-product-card-price","true"),t.parentElement.innerHTML=t.parentElement.innerHTML.replace(r,c[r]))}));o&&a.variantToGroupIndexToPrice[e][0]?.countryMap?.[o]?.compareAtPrice&&a.variantToGroupIndexToPrice[e][n]?.countryMap?.[o]?.compareAtPrice?i[I(a.variantToGroupIndexToPrice[e][0].countryMap?.[o]?.compareAtPrice*r)]=N(a.variantToGroupIndexToPrice[e][n].countryMap?.[o]?.compareAtPrice)?I(a.variantToGroupIndexToPrice[e][n].countryMap?.[o]?.compareAtPrice*r):"":N(a.variantToGroupIndexToPrice[e][0].compareAtPrice)&&(i[F(a.variantToGroupIndexToPrice[e][0].compareAtPrice*r)]=N(a.variantToGroupIndexToPrice[e][n].compareAtPrice)?F(a.variantToGroupIndexToPrice[e][n].compareAtPrice*r):"",i[F(a.variantToGroupIndexToPrice[e][0].compareAtPrice*r,!0)]=N(a.variantToGroupIndexToPrice[e][n].compareAtPrice)?F(a.variantToGroupIndexToPrice[e][n].compareAtPrice*r,!0):"");const d=Object.keys(i),p=K(t,d);for(let r of p)d.forEach((o=>{r.textContent?.trim().includes(o)&&!r.textContent?.trim().includes(i[o])&&r?.parentElement&&(r.parentElement.setAttribute("data-processed-abconvert-v2-variant",e),r.parentElement.setAttribute("data-processed-abconvert-v2-product-card-compare-at-price","true"),i[o]?r.parentElement.innerHTML=r.parentElement.innerHTML.replace(o,i[o]):o&&parseFloat(o)&&(r?.parentElement&&(r.parentElement.style.display="none"),t.querySelector(l)&&(t.querySelector(l).style.display="none")))}));if(f&&0!=n){Math.ceil((parseFloat(a.variantToGroupIndexToPrice[e][0].compareAtPrice)-parseFloat(a.variantToGroupIndexToPrice[e][0].price))/parseFloat(a.variantToGroupIndexToPrice[e][0].compareAtPrice));const r=Math.ceil((parseFloat(a.variantToGroupIndexToPrice[e][n].compareAtPrice)-parseFloat(a.variantToGroupIndexToPrice[e][n].price))/parseFloat(a.variantToGroupIndexToPrice[e][n].compareAtPrice)*100);let o=t.querySelectorAll(f);o.length>0&&o.forEach((t=>{if(a.variantToGroupIndexToPrice[e][n].compareAtPrice&&a.variantToGroupIndexToPrice[e][n].price){let e=t.textContent.match(/\d+(\.\d+)?/g)[0];t.textContent=t.textContent.replace(e,r)}else t.style.display="none"}))}if(v&&0!=n){const r=parseFloat(a.variantToGroupIndexToPrice[e][0].compareAtPrice)-parseFloat(a.variantToGroupIndexToPrice[e][0].price),o=parseFloat(a.variantToGroupIndexToPrice[e][n].compareAtPrice)-parseFloat(a.variantToGroupIndexToPrice[e][n].price);let c=t.querySelectorAll(v);c.length>0&&c.forEach((t=>{a.variantToGroupIndexToPrice[e][n].compareAtPrice&&a.variantToGroupIndexToPrice[e][n].price?(t.textContent.includes(F(r))&&(t.textContent=t.textContent.replace(F(r),F(o))),t.textContent.includes(F(r,!0))&&(t.textContent=t.textContent.replace(F(r,!0),F(o,!0)))):t.style.display="none"}))}}}}function N(e){return!isNaN(parseFloat(e))&&isFinite(e)}async function D(){const e=window?.Shopify?.country;return e?void localStorage.setItem("abconvert-country",e):void(localStorage.getItem("abconvert-country")||await async function(){const e=await fetch("https://app.abconvert.io/api/public/get-country-code",{method:"GET",mode:"cors"}),t=(await e.json()).countryCode;t&&localStorage.setItem("abconvert-country",t)}())}function R(){const e=window?.Shopify?.country;return e||localStorage.getItem("abconvert-country")}const j=async function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const o={method:t,mode:"cors",headers:{"Content-Type":"application/json"}};r&&(o.body=JSON.stringify(r));let n=150,a=0;for(;a<3;)try{const t=await fetch(e,o);if(t.ok)return t.json();throw new Error(await t.json())}catch(e){if(n*=2,a+=1,a>=3)throw e;await new Promise((e=>setTimeout(e,n)))}throw new Error("API Error")};function H(e,t){for(let r in t)if(e[r]!=t[r])return!0;return!1}function _(){try{if(!h)return;const e="span.cbb-frequently-bought-selector-label-sale-price > span.money,span.cbb-frequently-bought-selector-label-regular-price > span.money",t="s.cbb-frequently-bought-selector-label-compare-at-price > span.money",r="span.cbb-frequently-bought-total-price-sale-price > span.money,span.cbb-frequently-bought-selector-label-regular-price > span.money",o="s.cbb-frequently-bought-total-price-was-price > span.money";let n=0,a=0;document.querySelector(".cbb-frequently-bought-selector-list")?.querySelectorAll("li")?.forEach((r=>{const o=r.querySelector(e)?.textContent,c=r.querySelector(t)?.textContent;o&&o.match(/\d+(\.\d+)?/g)?.length&&(n+=parseFloat(o.match(/\d+(\.\d+)?/g)[0])),c&&c.match(/\d+(\.\d+)?/g)?.length?a+=parseFloat(c.match(/\d+(\.\d+)?/g)[0]):o&&o.match(/\d+(\.\d+)?/g)?.length&&(a+=parseFloat(o.match(/\d+(\.\d+)?/g)[0]))}));let c=document.querySelector(r)?.textContent.match(/\d+(\.\d+)?/g)?.[0];c&&(document.querySelector(r).textContent=document.querySelector(r)?.textContent.replace(c,F(n)));let i=document.querySelector(o)?.textContent.match(/\d+(\.\d+)?/g)?.[0];i&&(document.querySelector(o).textContent=document.querySelector(o)?.textContent.replace(i,F(a)))}catch(e){console.log("[ABConvert] handleFrequentlyBoughtTogether",e)}}async function W(e){if(!d)return;const t=document.querySelector(p)?.contentWindow?.document;if(t){const e=t.createElement("style");e.setAttribute("id","abconvert-sticky-style");const r=`\n                    ${m}, ${y} {\n                        display: none !important;\n                    }\n                    /* Add more CSS rules here */\n                `;e.textContent=r,t.querySelector("#abconvert-sticky-style")||t.head.appendChild(e)}setTimeout((()=>{U(e),new MutationObserver((function(t){U(e)})).observe(document.querySelector(p)?.contentWindow?.document,{childList:!0,subtree:!0})}),1e3)}async function U(e){const t=document.querySelector(p)?.contentWindow?.document;if(document.querySelector(p)?.contentWindow?.document?.querySelector(m)){for(let[r,o]of Object.entries(window.abconvertPriceCartTransformTestDict))if(N(r)){const r=G(o);if(o.variantIds[r].includes(e)){const n=parseFloat(o.variantToGroupIndexToPrice[e][0].price),a=parseFloat(o.variantToGroupIndexToPrice[e][0].compareAtPrice),c=parseFloat(o.variantToGroupIndexToPrice[e][r].price),i=parseFloat(o.variantToGroupIndexToPrice[e][r].compareAtPrice);n&&c&&(document.querySelector(p).contentWindow.document.querySelector(m).textContent=document.querySelector(p).contentWindow.document?.querySelector(m)?.textContent.replace(F(n),F(c)),document.querySelector(p).contentWindow.document.querySelector(m).textContent=document.querySelector(p).contentWindow.document?.querySelector(m)?.textContent.replace(F(n,!0),F(c,!0)),setTimeout((()=>{t.querySelector("#abconvert-sticky-style")&&t.querySelector("#abconvert-sticky-style")?.remove()}),500)),a&&i?(document.querySelector(p).contentWindow.document.querySelector(y).textContent=document.querySelector(p).contentWindow.document?.querySelector(y)?.textContent.replace(F(a),F(i)),document.querySelector(p).contentWindow.document.querySelector(y).textContent=document.querySelector(p).contentWindow.document?.querySelector(y)?.textContent.replace(F(a,!0),F(i,!0))):document.querySelector(p).contentWindow.document?.querySelector(y)?.remove()}}setTimeout((()=>{t.querySelector("#abconvert-sticky-style")&&t.querySelector("#abconvert-sticky-style")?.remove()}),1e3)}}async function J(e){if(s)for(let[t,r]of Object.entries(window.abconvertPriceCartTransformTestDict))if(N(t)){const t=G(r);if(r.variantIds[t].includes(e)){const o=parseFloat(r.variantToGroupIndexToPrice[e][0].price),a=parseFloat(r.variantToGroupIndexToPrice[e][0].compareAtPrice),c=parseFloat(r.variantToGroupIndexToPrice[e][t].price),i=parseFloat(r.variantToGroupIndexToPrice[e][t].compareAtPrice);if(i&&c&&o&&a){const e=a-o,t=i-c;document.querySelector(n).querySelector(u).setAttribute("data-processed-abconvert-v2-product-info-save-price","true"),document.querySelector(n).querySelector(u).textContent=document.querySelector(n)?.querySelector(u).textContent.replace(F(e),F(t))}else document.querySelector(n)?.querySelector(u).remove()}}}function K(e,t){for(var r,o=[],n=document.createNodeIterator(e,NodeFilter.SHOW_TEXT,{acceptNode:function(e){let r=!1;return t.forEach((t=>{e.textContent.trim().includes(t)&&(r=!0)})),r?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}});r=n.nextNode();)r&&o.push(r);return o}console.log("running ABConvert cart transform function. v1.0");try{if((()=>{const e=navigator.userAgent;return r.some((t=>t.test(e)))})())return;!function(){if(!q("abconvert-search-params")){const a=new URLSearchParams(location.search);if(a.size){const c={};for(let[e,t]of a.entries())"variant"!=e&&"page"!=e&&(c[e]=t);e="abconvert-search-params",t=JSON.stringify(c),r=18e5,(n=new Date).setTime(n.getTime()+r),o="; expires="+n.toUTCString(),document.cookie=e+"="+(t||"")+o+"; path=/"}}var e,t,r,o,n}(),async function(){const e=document.createElement("style"),t=`\n                ${a}, ${c} {\n                    display: none !important;\n                }\n                /* Add more CSS rules here */\n            `;e.textContent=t,document.head.appendChild(e),document.addEventListener("removeHideStyleElement",(()=>{document.head.contains(e)&&document.head.removeChild(e)})),setTimeout((()=>{EventTarget.prototype.dispatchEvent.call(document,new Event("removeHideStyleElement"))}),2500),A&&A.fetchCountryCode&&await D(),A&&A.setUrlParmas&&function(){const e=new URLSearchParams(location.search);for(let[t,r]of e.entries())localStorage.setItem(t,r)}(),async function(){for(let e=0;e<10;e++){const e=A.experiments;await D();let t={};if(e)for(let[r,o]of Object.entries(e)){const e=G(o);t[r]=e}let r=(await j((window?.Shopify?.routes?.root??"/")+"cart.js","GET")).attributes;const o={groupInfo:JSON.stringify(t),abconvertCountry:R(),abconvertSearchParams:q("abconvert-search-params")??""};if(!H(r,o))break;{const e={"Content-Type":"application/json"},t=(window?.Shopify?.routes?.root??"/")+"cart/update.js",r=JSON.stringify({attributes:o});await fetch(t,{method:"POST",headers:e,body:r})}}}(),localStorage.setItem("abconvert-price-cart-transform-test-dict",JSON.stringify(A));let r={};for(let[e,t]of Object.entries(A))if(N(e)){const e=G(t);r[t.experimentId]=e}var o;localStorage.setItem("abconvert-experiment-to-group-index",JSON.stringify(r)),o=()=>{"product"==window.pageType&&(function(){const e=document.querySelector(n);if(e&&window.abconvertPriceCartTransformTestDict[window.shopifyProductId]){let t=O()||"";$(window.shopifySelectedOrFirstAvailableVariantId.toString());let r=window.abconvertPriceCartTransformTestDict[window.shopifyProductId].variantIds[0];document.querySelector(n)?.addEventListener("change",(function(e){const o=O();E(e,r)?t=E(e,r):o&&(t=o,$(t))})),new MutationObserver((function(e){t&&$(t)})).observe(e,{childList:!0,subtree:!0})}}(),function(){const e=document.querySelector(n);if(e&&window.abconvertPriceCartTransformTestDict[window.shopifyProductId]){J(window.shopifySelectedOrFirstAvailableVariantId.toString()),W(window.shopifySelectedOrFirstAvailableVariantId.toString()),async function(e){if(!b)return;function t(){const t=document.createElement("style"),r="kaching-bundle";t.setAttribute("id",`abconvert-${r}-price-style`);const o=`\n            ${P}, ${S} {\n                display: none !important;\n            }\n            `;t.textContent=o,document.querySelector(`#abconvert-${r}-price-style`)||document.head.appendChild(t);const n=document.createElement("style");n.setAttribute("id",`abconvert-${r}-style`);const a=`\n                    ${T}{\n                        pointer-events: none;\n                    }\n                    `;n.textContent=a,document.querySelector(`#abconvert-${r}-style`)||document.head.appendChild(n);const c=setTimeout((function(){document.querySelector(`#abconvert-${r}-style`)&&document.querySelector(`#abconvert-${r}-style`)?.remove(),document.querySelector(`#abconvert-${r}-price-style`)&&document.querySelector(`#abconvert-${r}-price-style`)?.remove()}),2e3),i=document.querySelector(T)?.getAttribute("deal-block"),l=i?JSON.parse(i):null;for(let[t,o]of Object.entries(window.abconvertPriceCartTransformTestDict))if(N(t)){const t=G(o);if(o.variantIds[t].includes(e))if(0==t)document.querySelector(`#abconvert-${r}-price-style`)&&document.querySelector(`#abconvert-${r}-price-style`)?.remove();else{const n=parseFloat(o.variantToGroupIndexToPrice[e][0].price),a=parseFloat(o.variantToGroupIndexToPrice[e][t].price),i=parseFloat(o.variantToGroupIndexToPrice[e][0].compareAtPrice),s=parseFloat(o.variantToGroupIndexToPrice[e][t].compareAtPrice),u=document.querySelector(T)?.querySelectorAll("label.kaching-bundles__bar-container");if(!u)return;for(let e in u){const t=u[e];if(t?.querySelector(P)&&l?.dealBars){const{discountType:o,discountValue:u,quantity:d}=l.dealBars[e];if("default"==o)t.querySelector(P).textContent=t.querySelector(P)?.textContent.replace(F(n),F(a)),t.querySelector(P).textContent=t.querySelector(P)?.textContent.replace(F(n,!0),F(a,!0)),t.querySelector(P)?.setAttribute(`data-processed-abconvert-v2-${r}`,"true"),t.querySelector(S).textContent=t.querySelector(S).textContent.replace(F(i),F(s)),t.querySelector(S).textContent=t.querySelector(S).textContent.replace(F(i,!0),F(s,!0)),t.querySelector(S)?.setAttribute(`data-processed-abconvert-v2-${r}`,"true");else if("percentage"==o){const e=parseFloat(t.querySelector(P)?.textContent?.replace(",",".")?.match(/\d+(\.\d+)?/g)),o=a*(1-parseFloat(u)/100)*d,n=parseFloat(t.querySelector(S)?.textContent?.replace(",",".")?.match(/\d+(\.\d+)?/g)),i=s*d;e&&o&&!t.querySelector(P)?.getAttribute(`data-processed-abconvert-v2-${r}`)&&(t.querySelector(P).textContent=t.querySelector(P)?.textContent.replace(F(e),F(o)),t.querySelector(P).textContent=t.querySelector(P)?.textContent.replace(F(e,!0),F(o,!0)),t.querySelector(S).textContent=t.querySelector(S)?.textContent.replace(F(n),F(i)),t.querySelector(S).textContent=t.querySelector(S)?.textContent.replace(F(n,!0),F(i,!0)),t.querySelector(P)?.setAttribute(`data-processed-abconvert-v2-${r}`,"true"),t.querySelector(S)?.setAttribute(`data-processed-abconvert-v2-${r}`,"true")),document.querySelector(`#abconvert-${r}-style`)&&document.querySelector(`#abconvert-${r}-style`)?.remove(),document.querySelector(`#abconvert-${r}-price-style`)&&(document.querySelector(`#abconvert-${r}-price-style`)?.remove(),clearTimeout(c))}else if("amount"==o){const e=parseFloat(t.querySelector(P).textContent?.replace(",",".")?.match(/\d+(\.\d+)?/g)),o=(a-parseFloat(u))*d,n=parseFloat(t.querySelector(S)?.textContent?.replace(",",".")?.match(/\d+(\.\d+)?/g)),i=s*d;e&&o&&!t.querySelector(P)?.getAttribute(`data-processed-abconvert-v2-${r}`)&&(t.querySelector(P).textContent=t.querySelector(P)?.textContent.replace(F(e),F(o)),t.querySelector(P).textContent=t.querySelector(P)?.textContent.replace(F(e,!0),F(o,!0)),t.querySelector(S).textContent=t.querySelector(S)?.textContent.replace(F(n),F(i)),t.querySelector(S).textContent=t.querySelector(S)?.textContent.replace(F(n,!0),F(i,!0)),t.querySelector(P)?.setAttribute(`data-processed-abconvert-v2-${r}`,"true"),t.querySelector(S)?.setAttribute(`data-processed-abconvert-v2-${r}`,"true")),document.querySelector(`#abconvert-${r}-style`)&&document.querySelector(`#abconvert-${r}-style`)?.remove(),document.querySelector(`#abconvert-${r}-price-style`)&&(document.querySelector(`#abconvert-${r}-price-style`)?.remove(),clearTimeout(c))}else console.log(`[ABConvert] Unknown discount type: ${o}`)}}}}}let r=window.abconvertPriceCartTransformTestDict[window.shopifyProductId].variantIds[0];document.querySelector(n)?.addEventListener("change",(function(t){t.target&&t.target.defaultValue&&N(t.target.defaultValue)&&r.includes(t.target.defaultValue)&&(e=t.target.defaultValue)}));let o=!1;new MutationObserver((function(e){o||document.querySelector(T)&&(t(),o=!0,new MutationObserver((function(e){t()})).observe(document.querySelector(T),{childList:!0,subtree:!0}))})).observe(document.body,{childList:!0,subtree:!0})}(window.shopifySelectedOrFirstAvailableVariantId.toString()),_();let t="",r=window.abconvertPriceCartTransformTestDict[window.shopifyProductId].variantIds[0];document.querySelector(n)?.addEventListener("change",(function(e){E(e,r)&&(t=E(e,r))})),new MutationObserver((function(e){t&&(J(t),W(t))})).observe(e,{childList:!0,subtree:!0}),new MutationObserver((function(e){_(),e.map((e=>e.target)).includes(document.querySelector(p)?.parentElement)&&W(window.shopifySelectedOrFirstAvailableVariantId.toString())})).observe(document.body,{childList:!0,subtree:!0,attributes:!0})}}(),function(){if(!C)return;const e=window.shopifyProductId;if(!e||!window.abconvertPriceCartTransformTestDict[e])return;const t=window.abconvertPriceCartTransformTestDict[e],r=G(t),o=document.querySelector(C);if(!o)return;const{originalLowestPrice:n,originalLowestCompareAtPrice:a,lowestPrice:c,lowestCompareAtPrice:i,priceToReplace:s,compareAtPriceToReplace:u,originalFirstVariantPrice:d,originalFirstVariantCompareAtPrice:p,firstVariantPrice:m,firstVariantCompareAtPrice:y,slug:f,onlyVariant:v,isSamePrice:g,title:w}=M(t,r),b={};b[F(d)]=F(m),b[F(d,!0)]=F(m,!0),b[F(n)]=F(c),b[F(n,!0)]=F(c,!0);const T={};T[F(p)]=y?F(y):"",T[F(p,!0)]=y?F(y,!0):"",T[F(a)]=N(i)?F(i):"",T[F(a,!0)]=N(i)?F(i,!0):"";const P=Object.keys(b),S=K(o,P);for(let e of S)P.forEach((t=>{b[t]&&e.textContent?.trim().includes(t)&&!e.textContent?.trim().includes(b[t])&&(e.textContent=e.textContent.replace(t,b[t]),e.parentNode.setAttribute("data-processed-abconvert-v2-sticky-add-to-cart-price","true"),e.parentNode.setAttribute("data-processed-abconvert-v2-variant","first"))}));const h=Object.keys(T),x=K(o,h);for(let e of x)h.forEach((t=>{e.textContent?.trim().includes(t)&&!e.textContent?.trim().includes(T[t])&&(T[t]?e.textContent=e.textContent.replace(t,T[t]):t&&parseFloat(t)&&(e.parentElement&&(e.parentElement.style.display="none"),o.querySelector(l).style.display="none"),e.parentNode.setAttribute("data-processed-abconvert-v2-sticky-add-to-cart-compare-at-price","true"),e.parentNode.setAttribute("data-processed-abconvert-v2-variant","first"))}));o.setAttribute("data-processed-abconvert-v2-sticky-add-to-cart","true");let A="",q=window.abconvertPriceCartTransformTestDict[e].variantIds[r];o.addEventListener("change",(function(e){E(e,q)&&(A=E(e,q))})),new MutationObserver((function(e){A&&B(A,o)})).observe(o,{childList:!0,subtree:!0,attributes:!0})}()),k(),new MutationObserver((function(e){k()})).observe(document.body,{childList:!0,subtree:!0})},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",o,!1):(console.log("DOMContentLoaded has already fired. Executing directly."),o())}()}catch(e){console.log("[ABConvert] Error: ",e.message)}})()})();
</script>