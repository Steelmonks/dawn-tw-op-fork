<main class='twcss-container twcss-mx-auto twcss-px-8 twcss-py-12'>
  <!-- Primary Image Blocks Section -->
  <section class='twcss-grid twcss-gap-8 md:twcss-grid-cols-3 twcss-text-center twcss-px-8 twcss-py-12'>
    {% for block in section.blocks %}
      {% if block.type == 'image_text' %}
        <div
          style='padding: 20px;'
          class='twcss-flex twcss-flex-col twcss-items-center twcss-justify-center twcss-h-full twcss-gap-4'
        >
          {% if block.settings.icon != blank %}
            <div class='twcss-h-[100px] twcss-flex twcss-items-center'>
              <img
                src='{{ block.settings.icon | image_url: width: 100 }}'
                alt='{{ block.settings.title | escape }}'
                width='100'
                height='100'
                class='twcss-mx-auto twcss-object-contain'
                style='max-height: 100px;'
                loading='lazy'
              >
            </div>
          {% endif %}
          <p class='twcss-text-xl'>{{ block.settings.description }}</p>
        </div>
      {% endif %}
    {% endfor %}
  </section>

  <!-- Primary Heading Section -->
  <div class='twcss-w-full twcss-p-5 twcss-mb-8'>
    <h2 class='twcss-text-6xl twcss-font-bold twcss-text-center'>
      {{ section.settings.heading }}
    </h2>
  </div>

  <!-- Alternating Text Block 1 -->
  {% assign alternating_blocks = section.blocks | where: 'type', 'alternating_text' %}
  {% if alternating_blocks.size > 0 %}
    {% assign block = alternating_blocks[0] %}
    <section class='twcss-grid twcss-gap-8 md:twcss-grid-cols-2 twcss-p-10'>
      <div class='twcss-flex twcss-flex-col twcss-gap-4'>
        <h3 class='twcss-text-2xl twcss-font-bold twcss-text-brandblue twcss-text-center'>
          {{ block.settings.heading1 }}
        </h3>
        <div class='twcss-prose'>{{ block.settings.content1 }}</div>
      </div>
      <div class='twcss-flex twcss-flex-col twcss-gap-4'>
        <h3 class='twcss-text-2xl twcss-font-bold twcss-text-brandblue twcss-text-center'>
          {{ block.settings.heading2 }}
        </h3>
        <div class='twcss-prose'>{{ block.settings.content2 }}</div>
      </div>
    </section>
  {% endif %}

  <!-- Blue Heading + Richtext Section -->
  <section class='twcss-flex twcss-flex-col twcss-items-center twcss-gap-4 twcss-py-8'>
    <h2 class='twcss-text-2xl twcss-font-bold twcss-text-brandblue twcss-text-center'>
      {{ section.settings.blue_heading }}
    </h2>
    <div class='twcss-prose'>{{ section.settings.blue_content }}</div>
  </section>

  <!-- Secondary Image Blocks Section -->
  <section class='twcss-grid twcss-gap-8 md:twcss-grid-cols-2 twcss-text-center twcss-justify-center twcss-px-8 twcss-py-12'>
    {% for block in section.blocks %}
      {% if block.type == 'image_text2' %}
        <div
          style='padding: 20px;'
          class='twcss-flex twcss-flex-col twcss-items-center twcss-justify-center twcss-h-full twcss-gap-4'
        >
          {% if block.settings.icon != blank %}
            <div class='twcss-h-[100px] twcss-w-[100px] twcss-flex twcss-items-center twcss-justify-center'>
              <img
                src='{{ block.settings.icon | image_url: width: 100 }}'
                alt='{{ block.settings.title | escape }}'
                width='100'
                height='100'
                class='twcss-h-full twcss-w-full twcss-object-contain'
                loading='lazy'
              >
            </div>
          {% endif %}
          <p class='twcss-text-xl'>{{ block.settings.description }}</p>
        </div>
      {% endif %}
    {% endfor %}
  </section>

  <!-- Secondary Heading Section -->
  <h2 class='twcss-text-2xl twcss-font-bold twcss-text-center twcss-mb-8'>{{ section.settings.second_heading }}</h2>

  <!-- Alternating Text Block 2 -->
  {% if alternating_blocks.size > 1 %}
    {% assign block = alternating_blocks[1] %}
    <section class='twcss-grid twcss-gap-8 md:twcss-grid-cols-2 twcss-p-10'>
      <div class='twcss-flex twcss-flex-col twcss-gap-4'>
        <h3 class='twcss-text-2xl twcss-font-bold twcss-text-brandblue twcss-text-center'>
          {{ block.settings.heading1 }}
        </h3>
        <div class='twcss-prose'>{{ block.settings.content1 }}</div>
      </div>
      <div class='twcss-flex twcss-flex-col twcss-gap-4'>
        <h3 class='twcss-text-2xl twcss-font-bold twcss-text-brandblue twcss-text-center'>
          {{ block.settings.heading2 }}
        </h3>
        <div class='twcss-prose'>{{ block.settings.content2 }}</div>
      </div>
    </section>
  {% endif %}

  <!-- Contact Form Section -->
  <section class='twcss-flex twcss-flex-col twcss-gap-4 twcss-p-10 twcss-rounded-lg'>
    <!-- Toggle Button -->
    <button
      type='button'
      class='twcss-w-full twcss-text-left twcss-bg-white twcss-p-4 twcss-rounded-lg twcss-shadow twcss-font-bold twcss-text-lg twcss-text-brandblack twcss-border twcss-border-gray-200'
      style='background-color: #fff !important;'
      onclick="document.getElementById('contact-form-container').classList.toggle('twcss-hidden')"
    >
      {{ section.settings.button_text }}
    </button>

    <!-- Collapsible Form Container -->
    <div
      id='contact-form-container'
      class='twcss-mt-4 twcss-bg-white twcss-rounded-lg twcss-shadow twcss-p-4 twcss-hidden'
    >
      <div class='klaviyo-form-QXQCMv'></div>
    </div>
  </section>
</main>

{% schema %}
{
  "name": "Warranty Page",
  "settings": [
    {
      "type": "range",
      "id": "padding",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Section padding",
      "default": 36
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Main Heading"
    },
    {
      "type": "text",
      "id": "second_heading",
      "label": "Secondary Heading"
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Form Toggle Button Text"
    },
    {
      "type": "text",
      "id": "blue_heading",
      "label": "Blue Heading"
    },
    {
      "type": "richtext",
      "id": "blue_content",
      "label": "Blue Content"
    }
  ],
  "blocks": [
    {
      "type": "image_text",
      "name": "Feature Block",
      "settings": [
        {
          "type": "image_picker",
          "id": "icon",
          "label": "Block Image"
        },
        {
          "type": "text",
          "id": "description",
          "label": "Block Description"
        }
      ]
    },
    {
      "type": "alternating_text",
      "name": "Alternating Text Block",
      "limit": 2,
      "settings": [
        {
          "type": "text",
          "id": "heading1",
          "label": "First Block Heading"
        },
        {
          "type": "richtext",
          "id": "content1",
          "label": "First Block Content"
        },
        {
          "type": "text",
          "id": "heading2",
          "label": "Second Block Heading"
        },
        {
          "type": "richtext",
          "id": "content2",
          "label": "Second Block Content"
        }
      ]
    },
    {
      "type": "image_text2",
      "name": "Secondary Feature Block",
      "settings": [
        {
          "type": "image_picker",
          "id": "icon",
          "label": "Block Image"
        },
        {
          "type": "text",
          "id": "description",
          "label": "Block Description"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Warranty Page"
    }
  ]
}
{% endschema %}
